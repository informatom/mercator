<extend tag="form" for="Conversation">
  <old-form merge>
   <field-list: fields='name'/>
  </old-form>
</extend>

<extend tag="show-page" for="Conversation">
  <old-show-page merge>
     <append-content-body:>
      <form with="&@message" update="mymessages">
        <div> Neue Nachricht: <input:content/> </div>
      </form>

      <form id="refresh-form" style="display:none;" action="refresh" update="mymessages">
        <input name="id" value="#{this.id}" type="hidden"/>
      </form>
      <script>
        function update() {
          $("form#refresh-form").submit();
          setTimeout(update, 1000);
        };

        $(document).ready(function() {
          setTimeout(update, 1000);
        });
      </script>

      <div class="form-horizontal">
        <section param="collection-section" merge>
          <h3 param="collection-heading"> <%= t("attributes.messages") %> </h3>
          <collection:messages part="mymessages" />
        </section>
      </div>

      <div class="form-horizontal">
        <section param="collection-section" merge>
          <h3 param="collection-heading"> <%= t("attributes.baskets") %> </h3>
          <collection:baskets param/>
        </section>
      </div>

      <div class="form-horizontal">
        <section param="collection-section" merge>
          <h3 param="collection-heading"> <%= t("attributes.downloads") %> </h3>
          <collection:downloads param/>
        </section>
      </div>

   </append-content-body:>

  </old-show-page>
</extend>