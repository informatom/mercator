function categoryTree() {
  $("#categoryTree").fancytree({
    source: { url: "/productmanager/front/show_categorytree" },
    click: function(event, data) {
      if (data.node.key) {
        w2ui.productsgrid.load('/productmanager/front/show_products/' + data.node.key)
        w2ui.category.load('/productmanager/front/show_category/' + data.node.key)
        w2ui.productmanager.lock('right', w2utils.lang('Refreshing...'), true)
        $.ajax({
          url: "/admin/categories/" + data.node.key + "/edit_properties",
          context: document.body
        }).done(function(response) {
          $("#properties").html(response)
          w2ui.productmanager.unlock('right')
        }).fail(function(jqXHR, textStatus, errorThrown) {
          w2alert(jqXHR.responseText)
          w2ui.productmanager.unlock('right')
        })
      }
    }
  })
}