function webpageTree() {
  $("#pagetree").fancytree({
    source: { url: "/contentmanager/front/show_webpagestree" },
    extensions: ["dnd"],
    dnd: {
      dragStart: function(node, data) { return true },
      dragEnter: function(node, data) { return true },
      dragDrop: function(node, data) {
        data.otherNode.moveTo(node, data.hitMode)
        Messenger().run({
          progressMessage: '<%= I18n.t("activerecord.attribute_help.category.updating") %>',
          successMessage: '<%= I18n.t("activerecord.attribute_help.category.updated") %>',
          errorMessage: '<%= I18n.t("activerecord.attribute_help.category.update_failed") %>',
          hideAfter: 3
        },{
          url:"/contentmanager/front/update_webpages",
          method: "POST",
          data: {
            authenticity_token: csrf_token,
            webpages: $("#pagetree").fancytree("getTree").toDict()
          },
          dataType: 'script'
        })
      }
    },
    click: function(event, data) {
      w2ui['assignments'].load('/contentmanager/front/show_assignments/' + data.node.key)
      w2ui['webpage'].load('/contentmanager/front/show_webpage/' + data.node.key)
    }
  })
}